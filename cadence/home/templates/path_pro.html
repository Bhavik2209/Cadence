

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>[Your Company Name] - Products</title>
    {% load static %}
    <link rel="stylesheet" href="{% static 'css/product.css' %}"/>
  </head>
  <body>
    <section id="products" class="products-overview">
      <h2>Our Products</h2>
      <div class="product-card">
        <div class="product-content">
          <h3 class="product-title">PathPro</h3>
          <form action="{% url 'path_pro' %}" method="post">
            {% csrf_token %}
            <input 
              type="text" 
              name="goal" 
              placeholder="Enter your goal" 
              class="goal-input" 
              style="width: 100%; height: 50px; padding: 10px; border-radius: 5px; border: 1px solid #ccc; font-size: 16px;"
            >
            <button type="submit" class="cta-button" style="margin-top: 10px;">Explore PathPro</button>
          </form>
        </div>
      </div>
      <div class="product-card">
        <div class="product-content">
          {% if roadmap_html %}
            <h3 class="product-title">Generated Roadmap</h3>
            <div class="roadmap">{{ roadmap_html|safe }}</div>
            <button class="cta-button" style="margin-top: 10px;" onclick="saveRoadmap()">Let's Go</button>
          {% else %}
            <p>No roadmap generated yet.</p>
          {% endif %}
        </div>
      </div>
    </section>

    <footer class="footer">
      <p>&copy; 2024 [Your Company Name]. All rights reserved.</p>
    </footer>


    <script>
      function saveRoadmap() {
        fetch("{% url 'save_roadmap' %}", {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
            "X-CSRFToken": "{{ csrf_token }}"
          },
          body: JSON.stringify({
            roadmap_html: document.querySelector('.roadmap').innerHTML
          })
        })
        .then(response => response.json())
        .then(data => {
          if (data.success) {
            alert("Roadmap saved successfully!");
          } else {
            alert("Failed to save roadmap.");
          }
        })
        .catch(error => {
          console.error("Error:", error);
          alert("An error occurred. Please try again.");
        });
      }
    </script>


  </body>
</html>
