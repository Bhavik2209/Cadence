<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>[Your Company Name] - Quiz</title>
    <link rel="stylesheet" href="{% static 'quiz.css' %}" />
  </head>
  <body>
    <header class="header">
      <div class="hero-content">
        <h2>Test Your Knowledge with Our Quiz</h2>
      </div>
    </header>

    <section id="quiz" class="quiz-overview">
      <h2>Quiz</h2>
      <form id="quizForm">
        {{ quiz_html|safe }}
        <input type="hidden" name="answer_key" value="{{ answer_key }}">
        <button type="submit" class="cta-button" >Submit Quiz</button>
      </form>
    </section>

    <footer class="footer">
      <p>&copy; 2024 [Your Company Name]. All rights reserved.</p>
    </footer>

    <script>
      document.getElementById('quizForm').addEventListener('submit', function(event) {
          event.preventDefault();
          const form = event.target;
          const formData = new FormData(form);
          const userAnswers =[];

          // Initialize userAnswers with empty strings for each question
          const totalQuestions = form.querySelectorAll('.question-card').length;
          console.log(totalQuestions)
          for (let i = 0; i <totalQuestions; i++) {
              userAnswers.push('');
          }

          // Update userAnswers with selected values from the form data
          for (let [name, value] of formData.entries()) {
            if (name !== "answer_key") {
              console.log(name);
              console.log(name.slice(1))
              const questionIndex = parseInt(name.slice(1)) - 1;
              userAnswers[questionIndex] = value;
              
            }
          }

          console.log(userAnswers);

          // Example for scoring (uncomment and modify as needed)
          //const answerKey = ['c', 'a', 'b', 'a', 'a', 'a', 'd', 'b', 'a', 'c'];
          const answerKey = formData.get('answer_key');
          let score = 0;
          
          answerKey.forEach((correctAnswer, index) => {
              if (userAnswers[index] === correctAnswer) {
                  score += 1;
              }
          });
          
          alert(`Quiz submitted! Your score is: ${score}/10`);
      });
  </script>
  </body>
</html>
